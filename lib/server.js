// TODO refractor the server to this module